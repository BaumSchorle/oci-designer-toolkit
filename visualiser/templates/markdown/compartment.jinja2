{% import "common_macros.jinja2" as common with context %}
{% macro document_compartment(resource) -%}
    {% if resource.compartment_id != None -%}
        #### {{ resource.display_name }}
        {% if resource.definition is defined and resource.definition|length > 0 -%}
            {{ resource.definition }}

            {%- if resource.svg is defined -%}
                {{ resource.svg }}
            {%- endif -%}
        {%- endif %}

        {% if resource.freeform_tags is defined -%}
            {{ common.document_freeform_tags(resource.freeform_tags) }}
        {%- endif %}
        {% if resource.defined_tags is defined -%}
            {{ common.document_defined_tags(resource.defined_tags) }}
        {%- endif %}
    {%- endif %}
{%- endmacro %}
{% for compartment in compartments -%}
    {{ document_compartment(compartment) }}
{%- endfor %}